{% extends "admin/base.html" %}

{% block title %}{{ resource.display_name }} — {{ admin_title }}{% endblock %}

{% block page_title %}{{ resource.display_name }}{% endblock %}

{% block content %}
<div class="admin-toolbar">
    <form method="get" action="{{ admin_prefix }}/{{ resource.name }}/">
        <input type="search" name="search" placeholder="Search {{ resource.display_name }}…"
               value="{{ search }}" aria-label="Search">
    </form>
    <a href="{{ admin_prefix }}/{{ resource.name }}/create" role="button">Create New</a>
</div>

{% if items %}
<table class="admin-table">
    <thead>
        <tr>
            {% for col in resource.list_columns %}
            <th>{{ col.label }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            {% for col in resource.list_columns %}
            <td>
                {% if col.link_to_detail %}
                <a href="{{ admin_prefix }}/{{ resource.name }}/{{ item[resource.id_field] }}">
                    {{ item[col.name] }}
                </a>
                {% else %}
                {{ item[col.name] }}
                {% endif %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="pagination">
    {% if has_prev %}
    <a href="{{ admin_prefix }}/{{ resource.name }}/?page={{ page - 1 }}{% if search %}&search={{ search | urlencode }}{% endif %}">
        &laquo; Previous
    </a>
    {% else %}
    <span class="disabled">&laquo; Previous</span>
    {% endif %}

    <span>Page {{ page }} of {{ total_pages }} ({{ total_count }} records)</span>

    {% if has_next %}
    <a href="{{ admin_prefix }}/{{ resource.name }}/?page={{ page + 1 }}{% if search %}&search={{ search | urlencode }}{% endif %}">
        Next &raquo;
    </a>
    {% else %}
    <span class="disabled">Next &raquo;</span>
    {% endif %}
</div>
{% else %}
<p>No records found{% if search %} for "{{ search }}"{% endif %}.</p>
{% endif %}
{% endblock %}
